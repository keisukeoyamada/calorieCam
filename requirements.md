# 要件定義書

## 1. 概要

本ドキュメントは、開発するダイエットサポートアプリ「CalorieCam」(仮称)の要件を定義する。
このアプリは、食事の写真を元にカロリーを自動で算出し記録することで、ユーザーの健康的な食生活をサポートすることを目的とする。

## 2. ターゲットユーザー

-   日々の食事管理を手軽に行いたいと考えている人
-   健康やダイエットへの意識は高いが、手動でのカロリー計算に煩わしさを感じている人

## 3. 機能要件

### 3.1. ユーザー管理機能

-   **ユーザー登録**: ユーザーはアカウントを作成できる。
-   **ログイン**: 登録したアカウントでログインできる。
-   **カロリー上限設定**: ユーザーは1日の摂取カロリーの上限値を自由に設定・変更できる。

### 3.2. 食事記録機能

-   **食事タイミング選択**: ユーザーは「朝食」「昼食」「夕食」のいずれかを選択できる。
-   **写真アップロード**: ユーザーは食事の写真をスマートフォンやPCからアップロードできる。
-   **記録**: アップロードされた写真、食事のタイミング、日時がユーザーアカウントに紐づけて記録される。

### 3.3. カロリー計算機能

-   **画像解析**: アップロードされた写真をGemini APIに送信し、写っている食べ物を解析する。
-   **カロリー推定**: Gemini APIの解析結果を元に、食事のカロリーを推定する。
-   **結果の保存**: 推定されたカロリーと、食べ物の内容（例: 「ラーメン、餃子」）を食事記録に保存する。

### 3.4. ダッシュボード機能

-   **サマリー表示**: 今日の総摂取カロリー、設定した上限カロリー、そして「残り摂取可能カロリー」を分かりやすく表示する。
-   **食事履歴**: その日に記録した食事の写真と、それぞれの推定カロリーを一覧で確認できる。

## 4. 非機能要件

### 4.1. 技術スタック

-   **フロントエンド**: TypeScript, React
-   **バックエンド**: Python, FastAPI
-   **データベース**: MariaDB
-   **インフラ**: Docker

### 4.2. パフォーマンス

-   写真アップロードからカロリー計算結果が表示されるまでの時間は、10秒以内を目指す。

### 4.3. セキュリティ

-   ユーザーのパスワードはハッシュ化してデータベースに保存する。
-   Gemini APIキーは、環境変数としてバックエンドのコンテナに設定し、コード内に直接記述しない。
